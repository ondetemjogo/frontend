language: node_js
node_js:
- '4.1'
before_install:
- cd web
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm cache clean
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-tests/protractor.conf.js --browser=firefox
deploy:
  provider: heroku
  api_key:
    secure: KYd2A4aiJJu/prazmJCK/alsxRxIGy8nldtqkedfAhPQBHOa5diSNF/mR910zwo92ACYKIYIZ08x9w8mXcDohAZGD4oNnkOKj3MBCwTJdnECvrjmIfrIMl2PXihw8Ia7WD/CX+d+cqIkvnh5ea11QaXU0onVUKzEEkz6tBw+BNvHFfY5VZmXn8eJSXdtB6ubGEJ+167yTM5GW1rBqy+cVhh28dOUG7z3Bwg3gHRV925RdAy90i6/qXejhU7QkMr2AJglK1K6eyX4jU57/NTbyJsZrfLF0sGtkCy7a8H1qY9QXfnFPK/IrPBwFPXpwYx93vW4CM7pHxpooxr01PNUU9QdjpVHb+dyS3eVerBnzT7RLx49llB9Ur75ofiEnhxvjewiBWD/P2cf0BWFDdhLVN6Jrn1KuVvB7NBH1wc06LoBAlHXF63ooGl66rA+MRtxo4n+hBJLcwFAbyaO5qWQhnLlsnrNQz9uUnDXTdN68PFqIMNZNkRa+1NYq+guZhwQaDHRhAHwxFY645fRnNi3Imf1V7+s0cD3WiTLubs+4ARNY1W/DdcueamcSE7oEu0/gKQrrtJhQSDuhashja/y/1sno5WIxsAPjfEIH0doUhQd2Fduf0vBilosEGDKzsgWppBQN9hcbRvKNoLfyiCfpPASggHF6jWKmWT8oD1eH0g=
  app: ondetemjogo
  on:
    repo: ondetemjogo/frontend
