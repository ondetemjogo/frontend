language: node_js
node_js:
- '4.1'
before_install:
- cd web
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm cache clean
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-tests/protractor.conf.js --browser=firefox
deploy:
  provider: heroku
  api_key:
    secure: n/0jAkUslYnMwB9wAdEFTdU9aDyLr/WJY4bafDWtRItBVXwy7gxoAYWwUxWWSajeCO5Jg5KRTFCM2n5PCRyzapg22LFdqtqrBlEII57JSqTRWqOn9r7i9Ik60Xu6OBdMLohi1PgdXsAHmAh3YjFRdFZzwi9jME//p4Logh8Xzn21XifAKWIqofQGKUNTIDW//Vjrey50MvmXerqUVfZHyym87jRhFnvxpR23LJ4D4U64BdoIaRSIR1APp8tfx9Fq4pNuLHa8iPVizJEn+akJT4KmBBcn2N+EHeNxtY4NQbApGUfQzaoXHzzJYflUgGWt02LvK8xxladeMkoRUwKZW/nuOaOsQmq+USOV7PTav7g65/YWDo3oMksLueBTA7AoGEHC4dq2Z4pCKz+ZSHvKRHMIGOjZV7CWCpL+vnssJla8NVXsyqcBvIaHKKKrwsehTkEg9uK4GG35zVKOJmh2jetW/qbX877Ss5S3BTcbwh12xjTPdGwpwkz8+Ty3pUlxF8DqcdSZMGwolFNWxzPxJ421pDahtIhzrjjizLiwvof09y9WUgln9j4iAqhlAxblAv8OINvkyewp4lJvhsAXyVMa5hNQWhuKoUgbgJAuB0us/fvxrm3iJjZDQm7Eyjr1GYZwnSJHT+m2HiXU+A7RptjRkjsltQhSWzU7QcUIyH4=
  app: ondetemjogo
  on:
    repo: ondetemjogo/frontend
