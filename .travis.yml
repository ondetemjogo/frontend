language: node_js
node_js:
- '4.1'
before_install:
- cd web
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm cache clean
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-tests/protractor.conf.js --browser=firefox
deploy:
  provider: heroku
  api_key:
    secure: hxh5KbYDP8zShe7UkraflzpLUUSzLaDKdeYJvF9YDw/cU38ewjAohGBTbztbNsJdmywgKmaXMX9sk4oNErAl+r8VUS2dzjJQfGArHzjaRYu4U68VNXldiRBxb4IFDqlMr5JsuqcrwuAaY/e3j/6eCcRYQZTyowyQVIt/OirnSPqUJ7FR63hnyFiw8Dhpf6Wkeabh4wTN3xH/fcfKiPrqy2LiAHcX8fWgtNMbSZjkmDBi50/h2/lx9zjhUcqCOV+JxAGs272p5qEnwkZFqPk4amYLsdCQ53XZOHUB/bER0+u7a72KsnJbwAzq9MwsDbAFhB0MB6Dpbmr4lGpwFC0XN0yNBgafdTPP3GBLkg6aoSQebqpOAc7i/uCEy7i8lPN9oK2sxHWp283FcWMWny0FyFPPYfepZf7dUNNrxdHBnfuV02TqxVuhlitnZEG0Y1Sf0PC6ztRTQBWacmsOMLK38WmKqmO/MoCB+H5oRo2PKyvQaPq1TaGna/OAPpYqcz7DF+8XiZSLFDPyI+4ZSYaJ1d8gQhFEeKSroTOzvuztbV69iBa4JgWL0JTyu5OMpk8A8f06d3VVv/jmH+uivQGdipYyf0fgs5vGMecn7yCc/o3xc1Nu7JqkW5LPXc+0dqtYl772Risqlk6K9CpALC1SIStT2Hw2Pqb0ljdcmYEfBtM=
  app: ondetemjogo
  on:
    repo: ondetemjogo/frontend
