language: node_js
node_js:
- '4.1'
before_install:
- cd web
before_script:
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- npm cache clean
- npm start > /dev/null &
- npm run update-webdriver
- sleep 1
script:
- node_modules/.bin/karma start karma.conf.js --no-auto-watch --single-run --reporters=dots
  --browsers=Firefox
- node_modules/.bin/protractor e2e-tests/protractor.conf.js --browser=firefox
deploy:
  provider: heroku
  api_key:
    secure: hY+wrqQooAaq+YDyuMtxW1oIn61MUX+5P5qPQ3LlR88SyMWGoWBZsC/vMlaeyg11xKehWNEA5VNqvatKlIsWqo7m8WAHV6EKL+efTxp6mSMfLI9H5+bmOsNaiHHDdDtm6ZIm3qn+KPb8CK1r9DoO1Y1eNWdwNceAzw/sLdYkMe3ctznk5XQw6Kk2hSWCodP+TgKjCoWK5SGl6Fa73G9pJCuynXHFONPgWtFxPV5gRWIZrAYxuN2+/tKu07RNV7I39ZZQQoruNTzTecu7VqhorZNdJWW3ryek9H3riS97tVBYbn/JB8xqM3Tjj0w8IIfysxs8hWQRDDjIjfHANtrGjdWS5XE7/5p69sfIZDa62me/Dr8juA1Z7qUKooyyXW0nLmArOf3Ea3qmeQmTeGCtI/Fxt44SITE4i2+1J60/zqE9M3yzdoQ9vk9g5rwdAxVILp2qMxM3l5FuZqt3oD847IhHjtJyee/AAph3t3c+sd1hq0pGLVKdpASbSmGJm14pj5SU/GKo6Lsnr7aDxfrF8VtRGTfB1/tUPX+GaN8CIy1zRRrfBzM9BjN3/cdnwnoHVXm+b9+EC8Kij4aqXKEMZR7pF09InJVweP9/GnYu2RkT4QOL4tWcIXCrHfW7e0lBfJ+U17CaCtHNw4YGhtL6G7vcp8S72DctdZuoPf4inYs=
  app: ondetemjogo
  on:
    repo: ondetemjogo/frontend
